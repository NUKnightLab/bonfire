<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Welcome to Bonfire’s documentation! &mdash; Bonfire 0.1 documentation</title>
    
    <link rel="stylesheet" href="static/default.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <link rel="top" title="Bonfire 0.1 documentation" href="#" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="#">Bonfire 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="welcome-to-bonfire-s-documentation">
<h1>Welcome to Bonfire&#8217;s documentation!<a class="headerlink" href="#welcome-to-bonfire-s-documentation" title="Permalink to this headline">¶</a></h1>
<p>Contents:</p>
<div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><em>Index</em></a></li>
<li><a class="reference internal" href="py-modindex.html"><em>Module Index</em></a></li>
<li><a class="reference internal" href="search.html"><em>Search Page</em></a></li>
</ul>
</div>
<div class="section" id="api-documentation">
<h1>API Documentation<a class="headerlink" href="#api-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-bonfire.cli">
<span id="bonfire-cli"></span><h2>bonfire.cli<a class="headerlink" href="#module-bonfire.cli" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="bonfire.cli.build_universe">
<tt class="descclassname">bonfire.cli.</tt><tt class="descname">build_universe</tt><big>(</big><em>universe</em>, <em>build_mappings=True</em><big>)</big><a class="headerlink" href="#bonfire.cli.build_universe" title="Permalink to this definition">¶</a></dt>
<dd><p>Expand the universe from the seed user list in the universe file.
Should only be called once every 15 minutes.</p>
<p>This command also functions as an update of a universe.</p>
<p>Seed is currently limited to the first 14 users in the file. API threshold
limit is 15 calls per 15 minutes, and we need an extra call for
the initial request for seed user IDs. If we want a seed &gt; 14, we will
need to be sure not to exceed 15 hits/15 min.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.cli.build_universe_mappings">
<tt class="descclassname">bonfire.cli.</tt><tt class="descname">build_universe_mappings</tt><big>(</big><em>universe</em>, <em>rebuild=False</em><big>)</big><a class="headerlink" href="#bonfire.cli.build_universe_mappings" title="Permalink to this definition">¶</a></dt>
<dd><p>Create and map the universe.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.cli.cache_queries">
<tt class="descclassname">bonfire.cli.</tt><tt class="descname">cache_queries</tt><big>(</big><em>universe</em>, <em>top_links=False</em>, <em>tweet=False</em><big>)</big><a class="headerlink" href="#bonfire.cli.cache_queries" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.cli.cleanup_universe">
<tt class="descclassname">bonfire.cli.</tt><tt class="descname">cleanup_universe</tt><big>(</big><em>universe</em>, <em>days=30</em><big>)</big><a class="headerlink" href="#bonfire.cli.cleanup_universe" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.cli.collect_universe_tweets">
<tt class="descclassname">bonfire.cli.</tt><tt class="descname">collect_universe_tweets</tt><big>(</big><em>universe</em><big>)</big><a class="headerlink" href="#bonfire.cli.collect_universe_tweets" title="Permalink to this definition">¶</a></dt>
<dd><p>Connects to the streaming API and enqueues tweets from universe users.
Limited to the top 5000 users by API limitation.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.cli.command">
<tt class="descclassname">bonfire.cli.</tt><tt class="descname">command</tt><big>(</big><em>name=None</em>, <em>cls=None</em>, <em>**attrs</em><big>)</big><a class="headerlink" href="#bonfire.cli.command" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.cli.config_file_path">
<tt class="descclassname">bonfire.cli.</tt><tt class="descname">config_file_path</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.cli.config_file_path" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.cli.delete_content_by_url">
<tt class="descclassname">bonfire.cli.</tt><tt class="descname">delete_content_by_url</tt><big>(</big><em>universe</em>, <em>url</em><big>)</big><a class="headerlink" href="#bonfire.cli.delete_content_by_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the content specified by url.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.cli.delete_tweets_by_url">
<tt class="descclassname">bonfire.cli.</tt><tt class="descname">delete_tweets_by_url</tt><big>(</big><em>universe</em>, <em>url</em><big>)</big><a class="headerlink" href="#bonfire.cli.delete_tweets_by_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete tweets specified by url.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.cli.edit_file">
<tt class="descclassname">bonfire.cli.</tt><tt class="descname">edit_file</tt><big>(</big><em>filename</em><big>)</big><a class="headerlink" href="#bonfire.cli.edit_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.cli.ensure_config">
<tt class="descclassname">bonfire.cli.</tt><tt class="descname">ensure_config</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.cli.ensure_config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.cli.get_latest_raw_tweet">
<tt class="descclassname">bonfire.cli.</tt><tt class="descname">get_latest_raw_tweet</tt><big>(</big><em>universe</em><big>)</big><a class="headerlink" href="#bonfire.cli.get_latest_raw_tweet" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.cli.get_latest_tweet">
<tt class="descclassname">bonfire.cli.</tt><tt class="descname">get_latest_tweet</tt><big>(</big><em>universe</em><big>)</big><a class="headerlink" href="#bonfire.cli.get_latest_tweet" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.cli.get_universes">
<tt class="descclassname">bonfire.cli.</tt><tt class="descname">get_universes</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.cli.get_universes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.cli.logging_config">
<tt class="descclassname">bonfire.cli.</tt><tt class="descname">logging_config</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.cli.logging_config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.cli.process_universe_rawtweets">
<tt class="descclassname">bonfire.cli.</tt><tt class="descname">process_universe_rawtweets</tt><big>(</big><em>universe</em>, <em>build_mappings=True</em><big>)</big><a class="headerlink" href="#bonfire.cli.process_universe_rawtweets" title="Permalink to this definition">¶</a></dt>
<dd><p>Take all unprocessed tweets in given universe, extract and process their
contents.  When there are no tweets, sleep until it sees a new one.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.cli.yes_no">
<tt class="descclassname">bonfire.cli.</tt><tt class="descname">yes_no</tt><big>(</big><em>s</em><big>)</big><a class="headerlink" href="#bonfire.cli.yes_no" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-bonfire.config">
<span id="bonfire-config"></span><h2>bonfire.config<a class="headerlink" href="#module-bonfire.config" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="bonfire.config.config_file_path">
<tt class="descclassname">bonfire.config.</tt><tt class="descname">config_file_path</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.config.config_file_path" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.config.configuration">
<tt class="descclassname">bonfire.config.</tt><tt class="descname">configuration</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.config.configuration" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.config.get">
<tt class="descclassname">bonfire.config.</tt><tt class="descname">get</tt><big>(</big><em>section</em>, <em>option</em>, <em>default=None</em><big>)</big><a class="headerlink" href="#bonfire.config.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.config.get_elasticsearch_hosts">
<tt class="descclassname">bonfire.config.</tt><tt class="descname">get_elasticsearch_hosts</tt><big>(</big><em>universe</em><big>)</big><a class="headerlink" href="#bonfire.config.get_elasticsearch_hosts" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.config.get_twitter_keys">
<tt class="descclassname">bonfire.config.</tt><tt class="descname">get_twitter_keys</tt><big>(</big><em>universe</em><big>)</big><a class="headerlink" href="#bonfire.config.get_twitter_keys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.config.get_universe_seed">
<tt class="descclassname">bonfire.config.</tt><tt class="descname">get_universe_seed</tt><big>(</big><em>universe</em><big>)</big><a class="headerlink" href="#bonfire.config.get_universe_seed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.config.get_universes">
<tt class="descclassname">bonfire.config.</tt><tt class="descname">get_universes</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.config.get_universes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.config.logging_config">
<tt class="descclassname">bonfire.config.</tt><tt class="descname">logging_config</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.config.logging_config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-bonfire.content">
<span id="bonfire-content"></span><h2>bonfire.content<a class="headerlink" href="#module-bonfire.content" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="bonfire.content.BaseFetcher">
<em class="property">class </em><tt class="descclassname">bonfire.content.</tt><tt class="descname">BaseFetcher</tt><a class="headerlink" href="#bonfire.content.BaseFetcher" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="bonfire.content.BaseFetcher.get_authors">
<tt class="descname">get_authors</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.BaseFetcher.get_authors" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.content.BaseFetcher.get_canonical_link">
<tt class="descname">get_canonical_link</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.BaseFetcher.get_canonical_link" title="Permalink to this definition">¶</a></dt>
<dd><p>A shim to help support using Newspaper&#8217;s canonical_link.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.BaseFetcher.get_canonical_url">
<tt class="descname">get_canonical_url</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.BaseFetcher.get_canonical_url" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Main function for determining the canonical url. Check as follows:</dt>
<dd><ul class="first last simple">
<li>opengraph url (og:url)</li>
<li>twitter url (twitter:url)</li>
<li>newspaper&#8217;s guess (usually from meta tags)</li>
</ul>
</dd>
</dl>
<p>If none of these work or newspaper guesses a short-url domain,
it gives up and requests the url to get its final redirect.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.BaseFetcher.get_description">
<tt class="descname">get_description</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.BaseFetcher.get_description" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve description from opengraph, twitter, or meta tags.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.BaseFetcher.get_facebook_image">
<tt class="descname">get_facebook_image</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.BaseFetcher.get_facebook_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve opengraph image for the resource.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.BaseFetcher.get_image">
<tt class="descname">get_image</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.BaseFetcher.get_image" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Retrieve a favorite image for the resource, checking in this order:</dt>
<dd><ul class="first last simple">
<li>opengraph</li>
<li>twitter</li>
<li>newspaper&#8217;s top image.</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.BaseFetcher.get_provider">
<tt class="descname">get_provider</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.BaseFetcher.get_provider" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a prettified domain for the resource, stripping www.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.BaseFetcher.get_published">
<tt class="descname">get_published</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.BaseFetcher.get_published" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a published date. This almost never gets anything.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.BaseFetcher.get_tags">
<tt class="descname">get_tags</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.BaseFetcher.get_tags" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.content.BaseFetcher.get_title">
<tt class="descname">get_title</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.BaseFetcher.get_title" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve title from opengraph, twitter, or meta tags.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.BaseFetcher.get_top_image">
<tt class="descname">get_top_image</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.BaseFetcher.get_top_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the top article image.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.BaseFetcher.get_twitter_creator">
<tt class="descname">get_twitter_creator</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.BaseFetcher.get_twitter_creator" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve twitter username of the creator.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.BaseFetcher.get_twitter_image">
<tt class="descname">get_twitter_image</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.BaseFetcher.get_twitter_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve twitter image for the resource from
twitter:image.src or twitter.image.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.BaseFetcher.get_twitter_player">
<tt class="descname">get_twitter_player</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.BaseFetcher.get_twitter_player" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve default player for twitter cards.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="bonfire.content.DefaultFetcher">
<em class="property">class </em><tt class="descclassname">bonfire.content.</tt><tt class="descname">DefaultFetcher</tt><big>(</big><em>url</em>, <em>html=None</em><big>)</big><a class="headerlink" href="#bonfire.content.DefaultFetcher" title="Permalink to this definition">¶</a></dt>
<dd><p>Class to fetch article from a URL.</p>
<dl class="method">
<dt id="bonfire.content.DefaultFetcher.get_authors">
<tt class="descname">get_authors</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.DefaultFetcher.get_authors" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.content.DefaultFetcher.get_canonical_link">
<tt class="descname">get_canonical_link</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.DefaultFetcher.get_canonical_link" title="Permalink to this definition">¶</a></dt>
<dd><p>A shim to help support using Newspaper&#8217;s canonical_link.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.DefaultFetcher.get_canonical_url">
<tt class="descname">get_canonical_url</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.DefaultFetcher.get_canonical_url" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Main function for determining the canonical url. Check as follows:</dt>
<dd><ul class="first last simple">
<li>opengraph url (og:url)</li>
<li>twitter url (twitter:url)</li>
<li>newspaper&#8217;s guess (usually from meta tags)</li>
</ul>
</dd>
</dl>
<p>If none of these work or newspaper guesses a short-url domain,
it gives up and requests the url to get its final redirect.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.DefaultFetcher.get_description">
<tt class="descname">get_description</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.DefaultFetcher.get_description" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve description from opengraph, twitter, or meta tags.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.DefaultFetcher.get_facebook_image">
<tt class="descname">get_facebook_image</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.DefaultFetcher.get_facebook_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve opengraph image for the resource.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.DefaultFetcher.get_favicon">
<tt class="descname">get_favicon</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.DefaultFetcher.get_favicon" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve favicon url from article tags or from
<a class="reference external" href="http://g.etfv.co">http://g.etfv.co</a></p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.DefaultFetcher.get_image">
<tt class="descname">get_image</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.DefaultFetcher.get_image" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Retrieve a favorite image for the resource, checking in this order:</dt>
<dd><ul class="first last simple">
<li>opengraph</li>
<li>twitter</li>
<li>newspaper&#8217;s top image.</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.DefaultFetcher.get_image_dimensions">
<tt class="descname">get_image_dimensions</tt><big>(</big><em>img_url</em><big>)</big><a class="headerlink" href="#bonfire.content.DefaultFetcher.get_image_dimensions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.content.DefaultFetcher.get_metadata">
<tt class="descname">get_metadata</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.DefaultFetcher.get_metadata" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.content.DefaultFetcher.get_provider">
<tt class="descname">get_provider</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.DefaultFetcher.get_provider" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a prettified domain for the resource, stripping www.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.DefaultFetcher.get_published">
<tt class="descname">get_published</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.DefaultFetcher.get_published" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a published date. This almost never gets anything.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.DefaultFetcher.get_tags">
<tt class="descname">get_tags</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.DefaultFetcher.get_tags" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.content.DefaultFetcher.get_text">
<tt class="descname">get_text</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.DefaultFetcher.get_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the article text.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.DefaultFetcher.get_title">
<tt class="descname">get_title</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.DefaultFetcher.get_title" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.content.DefaultFetcher.get_top_image">
<tt class="descname">get_top_image</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.DefaultFetcher.get_top_image" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.content.DefaultFetcher.get_twitter_creator">
<tt class="descname">get_twitter_creator</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.DefaultFetcher.get_twitter_creator" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve twitter username of the creator.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.DefaultFetcher.get_twitter_image">
<tt class="descname">get_twitter_image</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.DefaultFetcher.get_twitter_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve twitter image for the resource from
twitter:image.src or twitter.image.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.DefaultFetcher.get_twitter_player">
<tt class="descname">get_twitter_player</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.DefaultFetcher.get_twitter_player" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve default player for twitter cards.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="bonfire.content.NewspaperFetcher">
<em class="property">class </em><tt class="descclassname">bonfire.content.</tt><tt class="descname">NewspaperFetcher</tt><big>(</big><em>url</em>, <em>html=None</em><big>)</big><a class="headerlink" href="#bonfire.content.NewspaperFetcher" title="Permalink to this definition">¶</a></dt>
<dd><p>Smartly fetches metadata from a newspaper article, and cleans the results.</p>
<dl class="method">
<dt id="bonfire.content.NewspaperFetcher.get_authors">
<tt class="descname">get_authors</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.NewspaperFetcher.get_authors" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve an author or authors. This works very sporadically.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.NewspaperFetcher.get_canonical_link">
<tt class="descname">get_canonical_link</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.NewspaperFetcher.get_canonical_link" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.content.NewspaperFetcher.get_canonical_url">
<tt class="descname">get_canonical_url</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.NewspaperFetcher.get_canonical_url" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Main function for determining the canonical url. Check as follows:</dt>
<dd><ul class="first last simple">
<li>opengraph url (og:url)</li>
<li>twitter url (twitter:url)</li>
<li>newspaper&#8217;s guess (usually from meta tags)</li>
</ul>
</dd>
</dl>
<p>If none of these work or newspaper guesses a short-url domain,
it gives up and requests the url to get its final redirect.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.NewspaperFetcher.get_description">
<tt class="descname">get_description</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.NewspaperFetcher.get_description" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.content.NewspaperFetcher.get_facebook_image">
<tt class="descname">get_facebook_image</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.NewspaperFetcher.get_facebook_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve opengraph image for the resource.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.NewspaperFetcher.get_favicon">
<tt class="descname">get_favicon</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.NewspaperFetcher.get_favicon" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve favicon url from article tags or from
<a class="reference external" href="http://g.etfv.co">http://g.etfv.co</a></p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.NewspaperFetcher.get_image">
<tt class="descname">get_image</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.NewspaperFetcher.get_image" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Retrieve a favorite image for the resource, checking in this order:</dt>
<dd><ul class="first last simple">
<li>opengraph</li>
<li>twitter</li>
<li>newspaper&#8217;s top image.</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.NewspaperFetcher.get_image_dimensions">
<tt class="descname">get_image_dimensions</tt><big>(</big><em>img_url</em><big>)</big><a class="headerlink" href="#bonfire.content.NewspaperFetcher.get_image_dimensions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.content.NewspaperFetcher.get_metadata">
<tt class="descname">get_metadata</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.NewspaperFetcher.get_metadata" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.content.NewspaperFetcher.get_provider">
<tt class="descname">get_provider</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.NewspaperFetcher.get_provider" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a prettified domain for the resource, stripping www.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.NewspaperFetcher.get_published">
<tt class="descname">get_published</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.NewspaperFetcher.get_published" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a published date. This almost never gets anything.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.NewspaperFetcher.get_tags">
<tt class="descname">get_tags</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.NewspaperFetcher.get_tags" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrive a comma-separated list of all keywords, categories,and tags,
flattened:</p>
<blockquote>
<div><ul class="simple">
<li>opengraph tags + sections</li>
<li>keywords + meta_keywords</li>
<li>tags</li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.NewspaperFetcher.get_text">
<tt class="descname">get_text</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.NewspaperFetcher.get_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the article text.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.NewspaperFetcher.get_title">
<tt class="descname">get_title</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.NewspaperFetcher.get_title" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve title from opengraph, twitter, or meta tags.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.NewspaperFetcher.get_top_image">
<tt class="descname">get_top_image</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.NewspaperFetcher.get_top_image" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.content.NewspaperFetcher.get_twitter_creator">
<tt class="descname">get_twitter_creator</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.NewspaperFetcher.get_twitter_creator" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve twitter username of the creator.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.NewspaperFetcher.get_twitter_image">
<tt class="descname">get_twitter_image</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.NewspaperFetcher.get_twitter_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve twitter image for the resource from
twitter:image.src or twitter.image.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.content.NewspaperFetcher.get_twitter_player">
<tt class="descname">get_twitter_player</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.content.NewspaperFetcher.get_twitter_player" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve default player for twitter cards.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="bonfire.content.extract">
<tt class="descclassname">bonfire.content.</tt><tt class="descname">extract</tt><big>(</big><em>url</em>, <em>html=None</em><big>)</big><a class="headerlink" href="#bonfire.content.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract metadata from a URL, and return a dict result.</p>
<p>Uses newspaper <a class="reference external" href="https://github.com/codelucas/newspaper/">https://github.com/codelucas/newspaper/</a>,
but overrides some defaults in favor of opengraph and twitter elements.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>html</strong> &#8211; if provided, skip downloading and go straight to parsing html.</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-bonfire.dates">
<span id="bonfire-dates"></span><h2>bonfire.dates<a class="headerlink" href="#module-bonfire.dates" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="bonfire.dates.apply_offset">
<tt class="descclassname">bonfire.dates.</tt><tt class="descname">apply_offset</tt><big>(</big><em>start_date</em>, <em>offset</em><big>)</big><a class="headerlink" href="#bonfire.dates.apply_offset" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply an offset in minutes to a given date.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.dates.dateify_string">
<tt class="descclassname">bonfire.dates.</tt><tt class="descname">dateify_string</tt><big>(</big><em>datestr</em>, <em>format='%a %b %d %H:%M:%S +0000 %Y'</em><big>)</big><a class="headerlink" href="#bonfire.dates.dateify_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a date string to a python datetime (UTC).</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.dates.epoch_to_datetime">
<tt class="descclassname">bonfire.dates.</tt><tt class="descname">epoch_to_datetime</tt><big>(</big><em>epoch</em><big>)</big><a class="headerlink" href="#bonfire.dates.epoch_to_datetime" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts unix timestamp to python datetime (UTC).</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.dates.get_query_dates">
<tt class="descclassname">bonfire.dates.</tt><tt class="descname">get_query_dates</tt><big>(</big><em>start</em>, <em>end</em>, <em>hours=None</em>, <em>stringify=True</em><big>)</big><a class="headerlink" href="#bonfire.dates.get_query_dates" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the start and end dates for a query.
:arg start: datetime to start with.</p>
<blockquote>
<div>If not present, defaults to since argument.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>end</strong> &#8211; datetime to end with.
If not present, defaults to now.</li>
<li><strong>hours</strong> &#8211; number of hours since end to start with,
if no start is specified.</li>
<li><strong>stringify</strong> &#8211; return as formatted strings.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="bonfire.dates.get_since_now">
<tt class="descclassname">bonfire.dates.</tt><tt class="descname">get_since_now</tt><big>(</big><em>start_time</em>, <em>time_type=None</em>, <em>stringify=True</em><big>)</big><a class="headerlink" href="#bonfire.dates.get_since_now" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the amount of time that has expired since now.
Smartly chooses between hours, days, minutes, and seconds.
Accepts datetime, unix epoch, or Twitter-formatted datestring.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>time_type</strong> &#8211; force return of a certain time measurement
(e.g. &#8220;120 seconds ago&#8221; instead of &#8220;2 minutes ago&#8221;)</li>
<li><strong>stringify</strong> &#8211; turn result into a string instead of tuple,
pluralized if need be</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="bonfire.dates.now">
<tt class="descclassname">bonfire.dates.</tt><tt class="descname">now</tt><big>(</big><em>stringify=False</em><big>)</big><a class="headerlink" href="#bonfire.dates.now" title="Permalink to this definition">¶</a></dt>
<dd><p>Return now.
:arg stringify: return now as a formatted string.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.dates.stringify_date">
<tt class="descclassname">bonfire.dates.</tt><tt class="descname">stringify_date</tt><big>(</big><em>dt</em><big>)</big><a class="headerlink" href="#bonfire.dates.stringify_date" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a datetime to an elasticsearch-formatted datestring (UTC).</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.dates.stringify_since_now">
<tt class="descclassname">bonfire.dates.</tt><tt class="descname">stringify_since_now</tt><big>(</big><em>amt</em>, <em>time_type</em><big>)</big><a class="headerlink" href="#bonfire.dates.stringify_since_now" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes an amount and a type. Returns a pluralized string.</p>
</dd></dl>

</div>
<div class="section" id="module-bonfire.db">
<span id="bonfire-db"></span><h2>bonfire.db<a class="headerlink" href="#module-bonfire.db" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="bonfire.db.add_to_results_cache">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">add_to_results_cache</tt><big>(</big><em>universe</em>, <em>hours</em>, <em>results</em><big>)</big><a class="headerlink" href="#bonfire.db.add_to_results_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Cache a set of results under certain number of hours.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.db.add_to_top_links">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">add_to_top_links</tt><big>(</big><em>universe</em>, <em>link</em><big>)</big><a class="headerlink" href="#bonfire.db.add_to_top_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Index a new top link to the given universe.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.db.build_universe_mappings">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">build_universe_mappings</tt><big>(</big><em>universe</em>, <em>rebuild=False</em><big>)</big><a class="headerlink" href="#bonfire.db.build_universe_mappings" title="Permalink to this definition">¶</a></dt>
<dd><p>Create and map the universe.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.db.cleanup">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">cleanup</tt><big>(</big><em>universe</em>, <em>days=30</em><big>)</big><a class="headerlink" href="#bonfire.db.cleanup" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete everything in the universe that is more than days old.
Does not apply to top content.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.db.delete_content_by_url">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">delete_content_by_url</tt><big>(</big><em>universe</em>, <em>url</em><big>)</big><a class="headerlink" href="#bonfire.db.delete_content_by_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the content specified by url.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.db.delete_tweets_by_url">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">delete_tweets_by_url</tt><big>(</big><em>universe</em>, <em>url</em><big>)</big><a class="headerlink" href="#bonfire.db.delete_tweets_by_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete tweets specified by url.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.db.delete_user">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">delete_user</tt><big>(</big><em>universe</em>, <em>user_id</em><big>)</big><a class="headerlink" href="#bonfire.db.delete_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a user from the universe index by their id.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.db.enqueue_tweet">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">enqueue_tweet</tt><big>(</big><em>universe</em>, <em>tweet</em><big>)</big><a class="headerlink" href="#bonfire.db.enqueue_tweet" title="Permalink to this definition">¶</a></dt>
<dd><p>Save a tweet to the universe index as an unprocessed tweet document.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.db.es">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">es</tt><big>(</big><em>universe</em><big>)</big><a class="headerlink" href="#bonfire.db.es" title="Permalink to this definition">¶</a></dt>
<dd><p>Return new-style Elasticsearch client connection for the universe</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.db.get_all_docs">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">get_all_docs</tt><big>(</big><em>universe</em>, <em>index</em>, <em>doc_type</em>, <em>body={}</em>, <em>size=None</em>, <em>field='_id'</em><big>)</big><a class="headerlink" href="#bonfire.db.get_all_docs" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to return all values in a certain field.
Defaults to retrieving all ids from a given index and doc type.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>universe</strong> &#8211; current universe.</li>
<li><strong>index</strong> &#8211; current index.</li>
<li><strong>doc_type</strong> &#8211; the type of doc to return all values for.</li>
<li><strong>body</strong> &#8211; add custom body, or leave blank to retrieve everything.</li>
<li><strong>size</strong> &#8211; limit by size, or leave as None to retrieve all.</li>
<li><strong>field</strong> &#8211; retrieve all of a specific field. Defaults to id.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="bonfire.db.get_cached_url">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">get_cached_url</tt><big>(</big><em>universe</em>, <em>url</em><big>)</big><a class="headerlink" href="#bonfire.db.get_cached_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a resolved URL from the index.
Returns None if URL doesn&#8217;t exist.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.db.get_items">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">get_items</tt><big>(</big><em>universe</em>, <em>quantity=20</em>, <em>hours=24</em>, <em>start=None</em>, <em>end=None</em>, <em>time_decay=True</em><big>)</big><a class="headerlink" href="#bonfire.db.get_items" title="Permalink to this definition">¶</a></dt>
<dd><p>The default function: gets the most popular links shared 
from a given universe and time frame.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>quantity</strong> &#8211; number of links to return</li>
<li><strong>hours</strong> &#8211; hours since end to search through.</li>
<li><strong>start</strong> &#8211; start datetime in UTC. Defaults to hours.</li>
<li><strong>end</strong> &#8211; end datetime in UTC. Defaults to now.</li>
<li><strong>time_decay</strong> &#8211; whether or not to decay the score based on the time
of its first tweet.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="bonfire.db.get_latest_raw_tweet">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">get_latest_raw_tweet</tt><big>(</big><em>universe</em><big>)</big><a class="headerlink" href="#bonfire.db.get_latest_raw_tweet" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.db.get_latest_tweet">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">get_latest_tweet</tt><big>(</big><em>universe</em><big>)</big><a class="headerlink" href="#bonfire.db.get_latest_tweet" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.db.get_recent_top_links">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">get_recent_top_links</tt><big>(</big><em>universe</em>, <em>quantity=20</em><big>)</big><a class="headerlink" href="#bonfire.db.get_recent_top_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the most recently added top links in the given universe.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.db.get_score_stats">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">get_score_stats</tt><big>(</big><em>universe</em>, <em>hours=4</em><big>)</big><a class="headerlink" href="#bonfire.db.get_score_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Get extended stats on the scores returned from the results cache.
:arg hours: type of query to search for.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.db.get_top_link">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">get_top_link</tt><big>(</big><em>universe</em>, <em>hours=4</em>, <em>quantity=5</em><big>)</big><a class="headerlink" href="#bonfire.db.get_top_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Search for any links in the current set that are a high enough score
to get into top links. Return one (and only one) if so.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.db.get_top_providers">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">get_top_providers</tt><big>(</big><em>universe</em>, <em>size=2000</em><big>)</big><a class="headerlink" href="#bonfire.db.get_top_providers" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a list of all providers (i.e. domains) in order of popularity.
Possible future use for autocomplete, to search across publications.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.db.get_universe_tweets">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">get_universe_tweets</tt><big>(</big><em>universe</em>, <em>query=None</em>, <em>quantity=20</em>, <em>hours=24</em>, <em>start=None</em>, <em>end=None</em><big>)</big><a class="headerlink" href="#bonfire.db.get_universe_tweets" title="Permalink to this definition">¶</a></dt>
<dd><p>Get tweets in a given universe.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>query</strong> &#8211; accepts None, string, or dict. 
if None, matches all
if string, searches across the tweets&#8217; text for the given string
if dict, accepts any elasticsearch match query 
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/query-dsl-match-query.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/query-dsl-match-query.html</a></li>
<li><strong>start</strong> &#8211; accepts int or datetime (timezone-unaware, UTC)
if int, starts at that many number of hours before now</li>
<li><strong>end</strong> &#8211; accepts datetime (timezone-unaware, UTC), defaults to now.</li>
<li><strong>size</strong> &#8211; number of tweets to return</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="bonfire.db.get_user_ids">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">get_user_ids</tt><big>(</big><em>universe</em>, <em>size=None</em><big>)</big><a class="headerlink" href="#bonfire.db.get_user_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Get top users for the universe by weight.
:arg size: number of users to get. Defaults to all users.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.db.get_user_weights">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">get_user_weights</tt><big>(</big><em>universe</em>, <em>user_ids</em><big>)</big><a class="headerlink" href="#bonfire.db.get_user_weights" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a list of user ids and returns a dict 
with their weighted influence.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.db.logger">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">logger</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.db.logger" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.db.next_unprocessed_tweet">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">next_unprocessed_tweet</tt><big>(</big><em>universe</em>, <em>not_ids=None</em><big>)</big><a class="headerlink" href="#bonfire.db.next_unprocessed_tweet" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the next unprocessed tweet and delete it from the index.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.db.save_content">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">save_content</tt><big>(</big><em>universe</em>, <em>content</em><big>)</big><a class="headerlink" href="#bonfire.db.save_content" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the content of a URL to the index.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.db.save_tweet">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">save_tweet</tt><big>(</big><em>universe</em>, <em>tweet</em><big>)</big><a class="headerlink" href="#bonfire.db.save_tweet" title="Permalink to this definition">¶</a></dt>
<dd><p>Save a tweet to the universe index, fully processed.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.db.save_user">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">save_user</tt><big>(</big><em>universe</em>, <em>user</em><big>)</big><a class="headerlink" href="#bonfire.db.save_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a user exists in the database. If not, create it.
If so, update it.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.db.score_link">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">score_link</tt><big>(</big><em>link</em>, <em>user_weights</em>, <em>time_decay=True</em>, <em>hours=24</em><big>)</big><a class="headerlink" href="#bonfire.db.score_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Scores a given link returned from elasticsearch.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>link</strong> &#8211; full elasticsearch result for the link</li>
<li><strong>user_weights</strong> &#8211; a dict with key,value pairs
key is the user&#8217;s id, value is the user&#8217;s weighted twitter influence</li>
<li><strong>time_decay</strong> &#8211; whether or not to decay the link&#8217;s score based on time</li>
<li><strong>hours</strong> &#8211; used for determining the decay factor if decay is enabled</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="bonfire.db.search_content">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">search_content</tt><big>(</big><em>universe</em>, <em>query</em>, <em>size=100</em><big>)</big><a class="headerlink" href="#bonfire.db.search_content" title="Permalink to this definition">¶</a></dt>
<dd><p>Search fulltext of all content across universes for a given string, 
or a custom match query.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>query</strong> &#8211; <p>accepts a string or dict
if string, searches fulltext of all content
if dict, accepts any elasticsearch match query
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/query-dsl-match-query.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/query-dsl-match-query.html</a></p>
</li>
<li><strong>size</strong> &#8211; number of links to return</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="bonfire.db.search_items">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">search_items</tt><big>(</big><em>universe</em>, <em>term</em>, <em>quantity=100</em><big>)</big><a class="headerlink" href="#bonfire.db.search_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Search the text of both tweets and content for a given term and universe,
and return some items matching one or the other.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>term</strong> &#8211; search term to use for querying both tweets and content</li>
<li><strong>quantity</strong> &#8211; number of items to return</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="bonfire.db.set_cached_url">
<tt class="descclassname">bonfire.db.</tt><tt class="descname">set_cached_url</tt><big>(</big><em>universe</em>, <em>url</em>, <em>resolved_url</em><big>)</big><a class="headerlink" href="#bonfire.db.set_cached_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Index a URL and its resolution in Elasticsearch</p>
</dd></dl>

</div>
<div class="section" id="module-bonfire.elastic">
<span id="bonfire-elastic"></span><h2>bonfire.elastic<a class="headerlink" href="#module-bonfire.elastic" title="Permalink to this headline">¶</a></h2>
<p>An attempt to make the Elasticsearch client a bit more usable. Currently
implements <cite>search</cite>, <cite>get</cite>, and <cite>mget</cite>. <cite>get_source</cite> maps to <cite>get</cite> because there
really should not be a need for both if the API is done correctly. For the time
being, other client methods will behave just as they do for the client provided
by Elasticsearch.</p>
<p>The implemented methods return ESDocument or ESCollection objects. ESDocument is
dot-addressable and dict-like. It&#8217;s keys are your document keys. Meta-data is
attached to this document with underscored properties: _index, _type, _id, and
when applicable: _score, _version, _found. I realize that <cite>_</cite> has the general
connotation of &#8220;privacy&#8221; in Python, but this seems to me to be the safest way to
have special keys and keep the API fairly usable.</p>
<p>ESCollection is an iterable of those documents and has the special properties:
took, timed_out, total_shards, successful_shards, failed_shards. No need for
[&#8216;hits&#8217;][&#8216;hits&#8217;] deferencing &#8211; just iterate the collection. Same for [&#8216;docs&#8217;]
on an mget operation.</p>
<dl class="class">
<dt id="bonfire.elastic.ESAggregation">
<em class="property">class </em><tt class="descclassname">bonfire.elastic.</tt><tt class="descname">ESAggregation</tt><a class="headerlink" href="#bonfire.elastic.ESAggregation" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="bonfire.elastic.ESAggregation.clear">
<tt class="descname">clear</tt><big>(</big><big>)</big> &rarr; None.  Remove all items from D.<a class="headerlink" href="#bonfire.elastic.ESAggregation.clear" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESAggregation.copy">
<tt class="descname">copy</tt><big>(</big><big>)</big> &rarr; a shallow copy of D<a class="headerlink" href="#bonfire.elastic.ESAggregation.copy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="bonfire.elastic.ESAggregation.fromkeys">
<em class="property">static </em><tt class="descname">fromkeys</tt><big>(</big><em>S</em><span class="optional">[</span>, <em>v</em><span class="optional">]</span><big>)</big> &rarr; New dict with keys from S and values equal to v.<a class="headerlink" href="#bonfire.elastic.ESAggregation.fromkeys" title="Permalink to this definition">¶</a></dt>
<dd><p>v defaults to None.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESAggregation.get">
<tt class="descname">get</tt><big>(</big><em>k</em><span class="optional">[</span>, <em>d</em><span class="optional">]</span><big>)</big> &rarr; D[k] if k in D, else d.  d defaults to None.<a class="headerlink" href="#bonfire.elastic.ESAggregation.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESAggregation.has_key">
<tt class="descname">has_key</tt><big>(</big><em>k</em><big>)</big> &rarr; True if D has a key k, else False<a class="headerlink" href="#bonfire.elastic.ESAggregation.has_key" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESAggregation.items">
<tt class="descname">items</tt><big>(</big><big>)</big> &rarr; list of D's (key, value) pairs, as 2-tuples<a class="headerlink" href="#bonfire.elastic.ESAggregation.items" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESAggregation.iteritems">
<tt class="descname">iteritems</tt><big>(</big><big>)</big> &rarr; an iterator over the (key, value) items of D<a class="headerlink" href="#bonfire.elastic.ESAggregation.iteritems" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESAggregation.iterkeys">
<tt class="descname">iterkeys</tt><big>(</big><big>)</big> &rarr; an iterator over the keys of D<a class="headerlink" href="#bonfire.elastic.ESAggregation.iterkeys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESAggregation.itervalues">
<tt class="descname">itervalues</tt><big>(</big><big>)</big> &rarr; an iterator over the values of D<a class="headerlink" href="#bonfire.elastic.ESAggregation.itervalues" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESAggregation.keys">
<tt class="descname">keys</tt><big>(</big><big>)</big> &rarr; list of D's keys<a class="headerlink" href="#bonfire.elastic.ESAggregation.keys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESAggregation.pop">
<tt class="descname">pop</tt><big>(</big><em>k</em><span class="optional">[</span>, <em>d</em><span class="optional">]</span><big>)</big> &rarr; v, remove specified key and return the corresponding value.<a class="headerlink" href="#bonfire.elastic.ESAggregation.pop" title="Permalink to this definition">¶</a></dt>
<dd><p>If key is not found, d is returned if given, otherwise KeyError is raised</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESAggregation.popitem">
<tt class="descname">popitem</tt><big>(</big><big>)</big> &rarr; (k, v), remove and return some (key, value) pair as a<a class="headerlink" href="#bonfire.elastic.ESAggregation.popitem" title="Permalink to this definition">¶</a></dt>
<dd><p>2-tuple; but raise KeyError if D is empty.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESAggregation.setdefault">
<tt class="descname">setdefault</tt><big>(</big><em>k</em><span class="optional">[</span>, <em>d</em><span class="optional">]</span><big>)</big> &rarr; D.get(k,d), also set D[k]=d if k not in D<a class="headerlink" href="#bonfire.elastic.ESAggregation.setdefault" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESAggregation.update">
<tt class="descname">update</tt><big>(</big><span class="optional">[</span><em>E</em>, <span class="optional">]</span><em>**F</em><big>)</big> &rarr; None.  Update D from dict/iterable E and F.<a class="headerlink" href="#bonfire.elastic.ESAggregation.update" title="Permalink to this definition">¶</a></dt>
<dd><p>If E present and has a .keys() method, does:     for k in E: D[k] = E[k]
If E present and lacks .keys() method, does:     for (k, v) in E: D[k] = v
In either case, this is followed by: for k in F: D[k] = F[k]</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESAggregation.values">
<tt class="descname">values</tt><big>(</big><big>)</big> &rarr; list of D's values<a class="headerlink" href="#bonfire.elastic.ESAggregation.values" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESAggregation.viewitems">
<tt class="descname">viewitems</tt><big>(</big><big>)</big> &rarr; a set-like object providing a view on D's items<a class="headerlink" href="#bonfire.elastic.ESAggregation.viewitems" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESAggregation.viewkeys">
<tt class="descname">viewkeys</tt><big>(</big><big>)</big> &rarr; a set-like object providing a view on D's keys<a class="headerlink" href="#bonfire.elastic.ESAggregation.viewkeys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESAggregation.viewvalues">
<tt class="descname">viewvalues</tt><big>(</big><big>)</big> &rarr; an object providing a view on D's values<a class="headerlink" href="#bonfire.elastic.ESAggregation.viewvalues" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="bonfire.elastic.ESClient">
<em class="property">class </em><tt class="descclassname">bonfire.elastic.</tt><tt class="descname">ESClient</tt><big>(</big><em>hosts=None</em>, <em>transport_class=&lt;class 'elasticsearch.transport.Transport'&gt;</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="bonfire.elastic.ESClient.abort_benchmark">
<tt class="descname">abort_benchmark</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.abort_benchmark" title="Permalink to this definition">¶</a></dt>
<dd><p>Aborts a running benchmark.
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/master/search-benchmark.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/master/search-benchmark.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> &#8211; A benchmark name</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.benchmark">
<tt class="descname">benchmark</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.benchmark" title="Permalink to this definition">¶</a></dt>
<dd><p>The benchmark API provides a standard mechanism for submitting queries
and measuring their performance relative to one another.
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/master/search-benchmark.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/master/search-benchmark.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>index</strong> &#8211; A comma-separated list of index names; use <cite>_all</cite> or empty
string to perform the operation on all indices</li>
<li><strong>doc_type</strong> &#8211; The name of the document type</li>
<li><strong>body</strong> &#8211; The search definition using the Query DSL</li>
<li><strong>verbose</strong> &#8211; Specify whether to return verbose statistics about each
iteration (default: false)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.bulk">
<tt class="descname">bulk</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.bulk" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform many index/delete operations in a single API call.
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/docs-bulk.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/docs-bulk.html</a></p>
<p>See the <tt class="xref py py-func docutils literal"><span class="pre">bulk()</span></tt> helper function for a more
friendly API.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>body</strong> &#8211; The operation definition and data (action-data pairs), as
either a newline separated string, or a sequence of dicts to
serialize (one per row).</li>
<li><strong>index</strong> &#8211; Default index for items which don&#8217;t provide one</li>
<li><strong>doc_type</strong> &#8211; Default document type for items which don&#8217;t provide one</li>
<li><strong>consistency</strong> &#8211; Explicit write consistency setting for the operation</li>
<li><strong>refresh</strong> &#8211; Refresh the index after performing the operation</li>
<li><strong>routing</strong> &#8211; Specific routing value</li>
<li><strong>replication</strong> &#8211; Explicitly set the replication type (default: sync)</li>
<li><strong>timeout</strong> &#8211; Explicit operation timeout</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.clear_scroll">
<tt class="descname">clear_scroll</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.clear_scroll" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the scroll request created by specifying the scroll parameter to
search.
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-request-scroll.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-request-scroll.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>scroll_id</strong> &#8211; The scroll ID or a list of scroll IDs</li>
<li><strong>body</strong> &#8211; A comma-separated list of scroll IDs to clear if none was
specified via the scroll_id parameter</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.count">
<tt class="descname">count</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a query and get the number of matches for that query.
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-count.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-count.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>index</strong> &#8211; A comma-separated list of indices to restrict the results</li>
<li><strong>doc_type</strong> &#8211; A comma-separated list of types to restrict the results</li>
<li><strong>body</strong> &#8211; A query to restrict the results (optional)</li>
<li><strong>allow_no_indices</strong> &#8211; Whether to ignore if a wildcard indices
expression resolves into no concrete indices. (This includes <cite>_all</cite>
string or when no indices have been specified)</li>
<li><strong>expand_wildcards</strong> &#8211; Whether to expand wildcard expression to concrete
indices that are open, closed or both., default &#8216;open&#8217;</li>
<li><strong>ignore_unavailable</strong> &#8211; Whether specified concrete indices should be
ignored when unavailable (missing or closed)</li>
<li><strong>min_score</strong> &#8211; Include only documents with a specific <cite>_score</cite> value in the result</li>
<li><strong>preference</strong> &#8211; Specify the node or shard the operation should be
performed on (default: random)</li>
<li><strong>q</strong> &#8211; Query in the Lucene query string syntax</li>
<li><strong>routing</strong> &#8211; Specific routing value</li>
<li><strong>source</strong> &#8211; The URL-encoded query definition (instead of using the request body)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.count_percolate">
<tt class="descname">count_percolate</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.count_percolate" title="Permalink to this definition">¶</a></dt>
<dd><p>The percolator allows to register queries against an index, and then
send percolate requests which include a doc, and getting back the
queries that match on that doc out of the set of registered queries.
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-percolate.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-percolate.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>index</strong> &#8211; The index of the document being count percolated.</li>
<li><strong>doc_type</strong> &#8211; The type of the document being count percolated.</li>
<li><strong>id</strong> &#8211; Substitute the document in the request body with a document
that is known by the specified id. On top of the id, the index and
type parameter will be used to retrieve the document from within the
cluster.</li>
<li><strong>body</strong> &#8211; The count percolator request definition using the percolate
DSL</li>
<li><strong>allow_no_indices</strong> &#8211; Whether to ignore if a wildcard indices
expression resolves into no concrete indices. (This includes <cite>_all</cite>
string or when no indices have been specified)</li>
<li><strong>expand_wildcards</strong> &#8211; Whether to expand wildcard expression to concrete
indices that are open, closed or both., default &#8216;open&#8217;</li>
<li><strong>ignore_unavailable</strong> &#8211; Whether specified concrete indices should be
ignored when unavailable (missing or closed)</li>
<li><strong>percolate_index</strong> &#8211; The index to count percolate the document into.
Defaults to index.</li>
<li><strong>percolate_type</strong> &#8211; The type to count percolate document into. Defaults
to type.</li>
<li><strong>preference</strong> &#8211; Specify the node or shard the operation should be
performed on (default: random)</li>
<li><strong>routing</strong> &#8211; A comma-separated list of specific routing values</li>
<li><strong>version</strong> &#8211; Explicit version number for concurrency control</li>
<li><strong>version_type</strong> &#8211; Specific version type</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.create">
<tt class="descname">create</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a typed JSON document in a specific index, making it searchable.
Behind the scenes this method calls index(..., op_type=&#8217;create&#8217;)
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/docs-index_.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/docs-index_.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>index</strong> &#8211; The name of the index</li>
<li><strong>doc_type</strong> &#8211; The type of the document</li>
<li><strong>id</strong> &#8211; Document ID</li>
<li><strong>body</strong> &#8211; The document</li>
<li><strong>consistency</strong> &#8211; Explicit write consistency setting for the operation</li>
<li><strong>id</strong> &#8211; Specific document ID (when the POST method is used)</li>
<li><strong>parent</strong> &#8211; ID of the parent document</li>
<li><strong>percolate</strong> &#8211; Percolator queries to execute while indexing the document</li>
<li><strong>refresh</strong> &#8211; Refresh the index after performing the operation</li>
<li><strong>replication</strong> &#8211; Specific replication type (default: sync)</li>
<li><strong>routing</strong> &#8211; Specific routing value</li>
<li><strong>timeout</strong> &#8211; Explicit operation timeout</li>
<li><strong>timestamp</strong> &#8211; Explicit timestamp for the document</li>
<li><strong>ttl</strong> &#8211; Expiration time for the document</li>
<li><strong>version</strong> &#8211; Explicit version number for concurrency control</li>
<li><strong>version_type</strong> &#8211; Specific version type</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.delete">
<tt class="descname">delete</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a typed JSON document from a specific index based on its id.
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/docs-delete.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/docs-delete.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>index</strong> &#8211; The name of the index</li>
<li><strong>doc_type</strong> &#8211; The type of the document</li>
<li><strong>id</strong> &#8211; The document ID</li>
<li><strong>consistency</strong> &#8211; Specific write consistency setting for the operation</li>
<li><strong>parent</strong> &#8211; ID of parent document</li>
<li><strong>refresh</strong> &#8211; Refresh the index after performing the operation</li>
<li><strong>replication</strong> &#8211; Specific replication type (default: sync)</li>
<li><strong>routing</strong> &#8211; Specific routing value</li>
<li><strong>timeout</strong> &#8211; Explicit operation timeout</li>
<li><strong>version</strong> &#8211; Explicit version number for concurrency control</li>
<li><strong>version_type</strong> &#8211; Specific version type</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.delete_by_query">
<tt class="descname">delete_by_query</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.delete_by_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete documents from one or more indices and one or more types based on a query.
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/docs-delete-by-query.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/docs-delete-by-query.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>index</strong> &#8211; A comma-separated list of indices to restrict the operation;
use <cite>_all</cite> to perform the operation on all indices</li>
<li><strong>doc_type</strong> &#8211; A comma-separated list of types to restrict the operation</li>
<li><strong>body</strong> &#8211; A query to restrict the operation specified with the Query
DSL</li>
<li><strong>allow_no_indices</strong> &#8211; Whether to ignore if a wildcard indices
expression resolves into no concrete indices. (This includes <cite>_all</cite>
string or when no indices have been specified)</li>
<li><strong>analyzer</strong> &#8211; The analyzer to use for the query string</li>
<li><strong>consistency</strong> &#8211; Specific write consistency setting for the operation</li>
<li><strong>default_operator</strong> &#8211; The default operator for query string query (AND
or OR), default u&#8217;OR&#8217;</li>
<li><strong>df</strong> &#8211; The field to use as default where no field prefix is given in
the query string</li>
<li><strong>expand_wildcards</strong> &#8211; Whether to expand wildcard expression to concrete
indices that are open, closed or both., default u&#8217;open&#8217;</li>
<li><strong>ignore_unavailable</strong> &#8211; Whether specified concrete indices should be
ignored when unavailable (missing or closed)</li>
<li><strong>q</strong> &#8211; Query in the Lucene query string syntax</li>
<li><strong>replication</strong> &#8211; Specific replication type, default u&#8217;sync&#8217;</li>
<li><strong>routing</strong> &#8211; Specific routing value</li>
<li><strong>source</strong> &#8211; The URL-encoded query definition (instead of using the
request body)</li>
<li><strong>timeout</strong> &#8211; Explicit operation timeout</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.delete_script">
<tt class="descname">delete_script</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.delete_script" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a stored script from elasticsearch.
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/modules-scripting.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/modules-scripting.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>lang</strong> &#8211; Script language</li>
<li><strong>id</strong> &#8211; Script ID</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.delete_template">
<tt class="descname">delete_template</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.delete_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a search template.
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-template.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-template.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>id</strong> &#8211; Template ID</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.exists">
<tt class="descname">exists</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a boolean indicating whether or not given document exists in Elasticsearch.
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/docs-get.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/docs-get.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>index</strong> &#8211; The name of the index</li>
<li><strong>id</strong> &#8211; The document ID</li>
<li><strong>doc_type</strong> &#8211; The type of the document (uses <cite>_all</cite> by default to
fetch the first document matching the ID across all types)</li>
<li><strong>parent</strong> &#8211; The ID of the parent document</li>
<li><strong>preference</strong> &#8211; Specify the node or shard the operation should be
performed on (default: random)</li>
<li><strong>realtime</strong> &#8211; Specify whether to perform the operation in realtime or
search mode</li>
<li><strong>refresh</strong> &#8211; Refresh the shard containing the document before
performing the operation</li>
<li><strong>routing</strong> &#8211; Specific routing value</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.explain">
<tt class="descname">explain</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.explain" title="Permalink to this definition">¶</a></dt>
<dd><p>The explain api computes a score explanation for a query and a specific
document. This can give useful feedback whether a document matches or
didn&#8217;t match a specific query.
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-explain.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-explain.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>index</strong> &#8211; The name of the index</li>
<li><strong>doc_type</strong> &#8211; The type of the document</li>
<li><strong>id</strong> &#8211; The document ID</li>
<li><strong>body</strong> &#8211; The query definition using the Query DSL</li>
<li><strong>_source</strong> &#8211; True or false to return the _source field or not, or a
list of fields to return</li>
<li><strong>_source_exclude</strong> &#8211; A list of fields to exclude from the returned
_source field</li>
<li><strong>_source_include</strong> &#8211; A list of fields to extract and return from the
_source field</li>
<li><strong>analyze_wildcard</strong> &#8211; Specify whether wildcards and prefix queries in
the query string query should be analyzed (default: false)</li>
<li><strong>analyzer</strong> &#8211; The analyzer for the query string query</li>
<li><strong>default_operator</strong> &#8211; The default operator for query string query (AND
or OR), (default: OR)</li>
<li><strong>df</strong> &#8211; The default field for query string query (default: _all)</li>
<li><strong>fields</strong> &#8211; A comma-separated list of fields to return in the response</li>
<li><strong>lenient</strong> &#8211; Specify whether format-based query failures (such as
providing text to a numeric field) should be ignored</li>
<li><strong>lowercase_expanded_terms</strong> &#8211; Specify whether query terms should be lowercased</li>
<li><strong>parent</strong> &#8211; The ID of the parent document</li>
<li><strong>preference</strong> &#8211; Specify the node or shard the operation should be
performed on (default: random)</li>
<li><strong>q</strong> &#8211; Query in the Lucene query string syntax</li>
<li><strong>routing</strong> &#8211; Specific routing value</li>
<li><strong>source</strong> &#8211; The URL-encoded query definition (instead of using the
request body)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.get">
<tt class="descname">get</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.get_script">
<tt class="descname">get_script</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.get_script" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a script from the API.
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/modules-scripting.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/modules-scripting.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>lang</strong> &#8211; Script language</li>
<li><strong>id</strong> &#8211; Script ID</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.get_source">
<tt class="descname">get_source</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.get_source" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.get_template">
<tt class="descname">get_template</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.get_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a search template.
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-template.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-template.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>id</strong> &#8211; Template ID</li>
<li><strong>body</strong> &#8211; The document</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.index">
<tt class="descname">index</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.index" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds or updates a typed JSON document in a specific index, making it searchable.
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/docs-index_.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/docs-index_.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>index</strong> &#8211; The name of the index</li>
<li><strong>doc_type</strong> &#8211; The type of the document</li>
<li><strong>body</strong> &#8211; The document</li>
<li><strong>id</strong> &#8211; Document ID</li>
<li><strong>consistency</strong> &#8211; Explicit write consistency setting for the operation</li>
<li><strong>op_type</strong> &#8211; Explicit operation type (default: index)</li>
<li><strong>parent</strong> &#8211; ID of the parent document</li>
<li><strong>refresh</strong> &#8211; Refresh the index after performing the operation</li>
<li><strong>replication</strong> &#8211; Specific replication type (default: sync)</li>
<li><strong>routing</strong> &#8211; Specific routing value</li>
<li><strong>timeout</strong> &#8211; Explicit operation timeout</li>
<li><strong>timestamp</strong> &#8211; Explicit timestamp for the document</li>
<li><strong>ttl</strong> &#8211; Expiration time for the document</li>
<li><strong>version</strong> &#8211; Explicit version number for concurrency control</li>
<li><strong>version_type</strong> &#8211; Specific version type</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.info">
<tt class="descname">info</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.info" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the basic info from the current cluster.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.list_benchmarks">
<tt class="descname">list_benchmarks</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.list_benchmarks" title="Permalink to this definition">¶</a></dt>
<dd><p>View the progress of long-running benchmarks.
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/master/search-benchmark.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/master/search-benchmark.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>index</strong> &#8211; A comma-separated list of index names; use <cite>_all</cite> or empty
string to perform the operation on all indices</li>
<li><strong>doc_type</strong> &#8211; The name of the document type</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.mget">
<tt class="descname">mget</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.mget" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.mlt">
<tt class="descname">mlt</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.mlt" title="Permalink to this definition">¶</a></dt>
<dd><p>Get documents that are &#8220;like&#8221; a specified document.
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-more-like-this.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-more-like-this.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>index</strong> &#8211; The name of the index</li>
<li><strong>doc_type</strong> &#8211; The type of the document (use <cite>_all</cite> to fetch the first
document matching the ID across all types)</li>
<li><strong>id</strong> &#8211; The document ID</li>
<li><strong>body</strong> &#8211; A specific search request definition</li>
<li><strong>boost_terms</strong> &#8211; The boost factor</li>
<li><strong>include</strong> &#8211; Whether to include the queried document from the response</li>
<li><strong>max_doc_freq</strong> &#8211; The word occurrence frequency as count: words with
higher occurrence in the corpus will be ignored</li>
<li><strong>max_query_terms</strong> &#8211; The maximum query terms to be included in the generated query</li>
<li><strong>max_word_length</strong> &#8211; The minimum length of the word: longer words will be ignored</li>
<li><strong>min_doc_freq</strong> &#8211; The word occurrence frequency as count: words with
lower occurrence in the corpus will be ignored</li>
<li><strong>min_term_freq</strong> &#8211; The term frequency as percent: terms with lower
occurence in the source document will be ignored</li>
<li><strong>min_word_length</strong> &#8211; The minimum length of the word: shorter words will be ignored</li>
<li><strong>mlt_fields</strong> &#8211; Specific fields to perform the query against</li>
<li><strong>percent_terms_to_match</strong> &#8211; How many terms have to match in order to
consider the document a match (default: 0.3)</li>
<li><strong>routing</strong> &#8211; Specific routing value</li>
<li><strong>search_from</strong> &#8211; The offset from which to return results</li>
<li><strong>search_indices</strong> &#8211; A comma-separated list of indices to perform the
query against (default: the index containing the document)</li>
<li><strong>search_query_hint</strong> &#8211; The search query hint</li>
<li><strong>search_scroll</strong> &#8211; A scroll search request definition</li>
<li><strong>search_size</strong> &#8211; The number of documents to return (default: 10)</li>
<li><strong>search_source</strong> &#8211; A specific search request definition (instead of
using the request body)</li>
<li><strong>search_type</strong> &#8211; Specific search type (eg. <cite>dfs_then_fetch</cite>, <cite>count</cite>, etc)</li>
<li><strong>search_types</strong> &#8211; A comma-separated list of types to perform the query
against (default: the same type as the document)</li>
<li><strong>stop_words</strong> &#8211; A list of stop words to be ignored</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.mpercolate">
<tt class="descname">mpercolate</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.mpercolate" title="Permalink to this definition">¶</a></dt>
<dd><p>The percolator allows to register queries against an index, and then
send percolate requests which include a doc, and getting back the
queries that match on that doc out of the set of registered queries.
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-percolate.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-percolate.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>index</strong> &#8211; The index of the document being count percolated to use as
default</li>
<li><strong>doc_type</strong> &#8211; The type of the document being percolated to use as
default.</li>
<li><strong>body</strong> &#8211; The percolate request definitions (header &amp; body pair),
separated by newlines</li>
<li><strong>allow_no_indices</strong> &#8211; Whether to ignore if a wildcard indices
expression resolves into no concrete indices. (This includes <cite>_all</cite>
string or when no indices have been specified)</li>
<li><strong>expand_wildcards</strong> &#8211; Whether to expand wildcard expression to concrete
indices that are open, closed or both., default &#8216;open&#8217;</li>
<li><strong>ignore_unavailable</strong> &#8211; Whether specified concrete indices should be
ignored when unavailable (missing or closed)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.msearch">
<tt class="descname">msearch</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.msearch" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute several search requests within the same API.
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-multi-search.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-multi-search.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>body</strong> &#8211; The request definitions (metadata-search request definition
pairs), as either a newline separated string, or a sequence of
dicts to serialize (one per row).</li>
<li><strong>index</strong> &#8211; A comma-separated list of index names to use as default</li>
<li><strong>doc_type</strong> &#8211; A comma-separated list of document types to use as default</li>
<li><strong>search_type</strong> &#8211; Search operation type</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.mtermvectors">
<tt class="descname">mtermvectors</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.mtermvectors" title="Permalink to this definition">¶</a></dt>
<dd><p>Multi termvectors API allows to get multiple termvectors based on an
index, type and id.
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/master/docs-multi-termvectors.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/master/docs-multi-termvectors.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>index</strong> &#8211; The index in which the document resides.</li>
<li><strong>doc_type</strong> &#8211; The type of the document.</li>
<li><strong>body</strong> &#8211; Define ids, parameters or a list of parameters per document
here. You must at least provide a list of document ids. See
documentation.</li>
<li><strong>field_statistics</strong> &#8211; Specifies if document count, sum of document
frequencies and sum of total term frequencies should be returned.
Applies to all returned documents unless otherwise specified in body
&#8220;params&#8221; or &#8220;docs&#8221;., default True</li>
<li><strong>fields</strong> &#8211; A comma-separated list of fields to return. Applies to all
returned documents unless otherwise specified in body &#8220;params&#8221; or
&#8220;docs&#8221;.</li>
<li><strong>ids</strong> &#8211; A comma-separated list of documents ids. You must define ids
as parameter or set &#8220;ids&#8221; or &#8220;docs&#8221; in the request body</li>
<li><strong>offsets</strong> &#8211; Specifies if term offsets should be returned. Applies to
all returned documents unless otherwise specified in body &#8220;params&#8221;
or &#8220;docs&#8221;., default True</li>
<li><strong>parent</strong> &#8211; Parent id of documents. Applies to all returned documents
unless otherwise specified in body &#8220;params&#8221; or &#8220;docs&#8221;.</li>
<li><strong>payloads</strong> &#8211; Specifies if term payloads should be returned. Applies to
all returned documents unless otherwise specified in body &#8220;params&#8221;
or &#8220;docs&#8221;., default True</li>
<li><strong>positions</strong> &#8211; Specifies if term positions should be returned. Applies
to all returned documents unless otherwise specified in body
&#8220;params&#8221; or &#8220;docs&#8221;., default True</li>
<li><strong>preference</strong> &#8211; Specify the node or shard the operation should be
performed on (default: random) .Applies to all returned documents
unless otherwise specified in body &#8220;params&#8221; or &#8220;docs&#8221;.</li>
<li><strong>routing</strong> &#8211; Specific routing value. Applies to all returned documents
unless otherwise specified in body &#8220;params&#8221; or &#8220;docs&#8221;.</li>
<li><strong>term_statistics</strong> &#8211; Specifies if total term frequency and document
frequency should be returned. Applies to all returned documents
unless otherwise specified in body &#8220;params&#8221; or &#8220;docs&#8221;., default
False</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.percolate">
<tt class="descname">percolate</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.percolate" title="Permalink to this definition">¶</a></dt>
<dd><p>The percolator allows to register queries against an index, and then
send percolate requests which include a doc, and getting back the
queries that match on that doc out of the set of registered queries.
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-percolate.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-percolate.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>index</strong> &#8211; The index of the document being percolated.</li>
<li><strong>doc_type</strong> &#8211; The type of the document being percolated.</li>
<li><strong>id</strong> &#8211; Substitute the document in the request body with a document
that is known by the specified id. On top of the id, the index and
type parameter will be used to retrieve the document from within the
cluster.</li>
<li><strong>body</strong> &#8211; The percolator request definition using the percolate DSL</li>
<li><strong>allow_no_indices</strong> &#8211; Whether to ignore if a wildcard indices
expression resolves into no concrete indices. (This includes <cite>_all</cite>
string or when no indices have been specified)</li>
<li><strong>expand_wildcards</strong> &#8211; Whether to expand wildcard expression to concrete
indices that are open, closed or both., default &#8216;open&#8217;</li>
<li><strong>ignore_unavailable</strong> &#8211; Whether specified concrete indices should be
ignored when unavailable (missing or closed)</li>
<li><strong>percolate_format</strong> &#8211; Return an array of matching query IDs instead of
objects</li>
<li><strong>percolate_index</strong> &#8211; The index to percolate the document into. Defaults
to index.</li>
<li><strong>percolate_type</strong> &#8211; The type to percolate document into. Defaults to
type.</li>
<li><strong>preference</strong> &#8211; Specify the node or shard the operation should be
performed on (default: random)</li>
<li><strong>routing</strong> &#8211; A comma-separated list of specific routing values</li>
<li><strong>version</strong> &#8211; Explicit version number for concurrency control</li>
<li><strong>version_type</strong> &#8211; Specific version type</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.ping">
<tt class="descname">ping</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.ping" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the cluster is up, False otherwise.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.put_script">
<tt class="descname">put_script</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.put_script" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a script in given language with specified ID.
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/modules-scripting.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/modules-scripting.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>lang</strong> &#8211; Script language</li>
<li><strong>id</strong> &#8211; Script ID</li>
<li><strong>body</strong> &#8211; The document</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.put_template">
<tt class="descname">put_template</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.put_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a search template.
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-template.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-template.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>id</strong> &#8211; Template ID</li>
<li><strong>body</strong> &#8211; The document</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.scroll">
<tt class="descname">scroll</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.scroll" title="Permalink to this definition">¶</a></dt>
<dd><p>Scroll a search request created by specifying the scroll parameter.
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-request-scroll.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-request-scroll.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>scroll_id</strong> &#8211; The scroll ID</li>
<li><strong>scroll</strong> &#8211; Specify how long a consistent view of the index should be
maintained for scrolled search</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.search">
<tt class="descname">search</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.search" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.search_shards">
<tt class="descname">search_shards</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.search_shards" title="Permalink to this definition">¶</a></dt>
<dd><p>The search shards api returns the indices and shards that a search
request would be executed against. This can give useful feedback for working
out issues or planning optimizations with routing and shard preferences.
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/master/search-shards.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/master/search-shards.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>index</strong> &#8211; The name of the index</li>
<li><strong>doc_type</strong> &#8211; The type of the document</li>
<li><strong>allow_no_indices</strong> &#8211; Whether to ignore if a wildcard indices
expression resolves into no concrete indices. (This includes <cite>_all</cite>
string or when no indices have been specified)</li>
<li><strong>expand_wildcards</strong> &#8211; Whether to expand wildcard expression to concrete
indices that are open, closed or both. (default: &#8216;&#8220;open&#8221;&#8217;)</li>
<li><strong>ignore_unavailable</strong> &#8211; Whether specified concrete indices should be
ignored when unavailable (missing or closed)</li>
<li><strong>local</strong> &#8211; Return local information, do not retrieve the state from
master node (default: false)</li>
<li><strong>preference</strong> &#8211; Specify the node or shard the operation should be
performed on (default: random)</li>
<li><strong>routing</strong> &#8211; Specific routing value</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.search_template">
<tt class="descname">search_template</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.search_template" title="Permalink to this definition">¶</a></dt>
<dd><p>A query that accepts a query template and a map of key/value pairs to
fill in template parameters.
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/master/query-dsl-template-query.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/master/query-dsl-template-query.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>index</strong> &#8211; A comma-separated list of index names to search; use <cite>_all</cite>
or empty string to perform the operation on all indices</li>
<li><strong>doc_type</strong> &#8211; A comma-separated list of document types to search; leave
empty to perform the operation on all types</li>
<li><strong>body</strong> &#8211; The search definition template and its params</li>
<li><strong>allow_no_indices</strong> &#8211; Whether to ignore if a wildcard indices
expression resolves into no concrete indices. (This includes <cite>_all</cite>
string or when no indices have been specified)</li>
<li><strong>expand_wildcards</strong> &#8211; Whether to expand wildcard expression to concrete
indices that are open, closed or both., default &#8216;open&#8217;</li>
<li><strong>ignore_unavailable</strong> &#8211; Whether specified concrete indices should be
ignored when unavailable (missing or closed)</li>
<li><strong>preference</strong> &#8211; Specify the node or shard the operation should be
performed on (default: random)</li>
<li><strong>routing</strong> &#8211; A comma-separated list of specific routing values</li>
<li><strong>scroll</strong> &#8211; Specify how long a consistent view of the index should be
maintained for scrolled search</li>
<li><strong>search_type</strong> &#8211; Search operation type</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.suggest">
<tt class="descname">suggest</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.suggest" title="Permalink to this definition">¶</a></dt>
<dd><p>The suggest feature suggests similar looking terms based on a provided
text by using a suggester.
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-search.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-search.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>index</strong> &#8211; A comma-separated list of index names to restrict the operation;
use <cite>_all</cite> or empty string to perform the operation on all indices</li>
<li><strong>body</strong> &#8211; The request definition</li>
<li><strong>allow_no_indices</strong> &#8211; Whether to ignore if a wildcard indices
expression resolves into no concrete indices. (This includes <cite>_all</cite>
string or when no indices have been specified)</li>
<li><strong>expand_wildcards</strong> &#8211; Whether to expand wildcard expression to concrete
indices that are open, closed or both., default &#8216;open&#8217;</li>
<li><strong>ignore_unavailable</strong> &#8211; Whether specified concrete indices should be
ignored when unavailable (missing or closed)</li>
<li><strong>preference</strong> &#8211; Specify the node or shard the operation should be
performed on (default: random)</li>
<li><strong>routing</strong> &#8211; Specific routing value</li>
<li><strong>source</strong> &#8211; The URL-encoded request definition (instead of using request body)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.termvector">
<tt class="descname">termvector</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.termvector" title="Permalink to this definition">¶</a></dt>
<dd><p>Added in 1.
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/master/search-termvectors.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/master/search-termvectors.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>index</strong> &#8211; The index in which the document resides.</li>
<li><strong>doc_type</strong> &#8211; The type of the document.</li>
<li><strong>id</strong> &#8211; The id of the document.</li>
<li><strong>body</strong> &#8211; Define parameters. See documentation.</li>
<li><strong>field_statistics</strong> &#8211; Specifies if document count, sum of document
frequencies and sum of total term frequencies should be returned.,
default True</li>
<li><strong>fields</strong> &#8211; A comma-separated list of fields to return.</li>
<li><strong>offsets</strong> &#8211; Specifies if term offsets should be returned., default
True</li>
<li><strong>parent</strong> &#8211; Parent id of documents.</li>
<li><strong>payloads</strong> &#8211; Specifies if term payloads should be returned., default
True</li>
<li><strong>positions</strong> &#8211; Specifies if term positions should be returned., default
True</li>
<li><strong>preference</strong> &#8211; Specify the node or shard the operation should be
performed on (default: random).</li>
<li><strong>routing</strong> &#8211; Specific routing value.</li>
<li><strong>term_statistics</strong> &#8211; Specifies if total term frequency and document
frequency should be returned., default False</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESClient.update">
<tt class="descname">update</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESClient.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update a document based on a script or partial data provided.
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/docs-update.html">http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/docs-update.html</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>index</strong> &#8211; The name of the index</li>
<li><strong>doc_type</strong> &#8211; The type of the document</li>
<li><strong>id</strong> &#8211; Document ID</li>
<li><strong>body</strong> &#8211; The request definition using either <cite>script</cite> or partial <cite>doc</cite></li>
<li><strong>consistency</strong> &#8211; Explicit write consistency setting for the operation</li>
<li><strong>fields</strong> &#8211; A comma-separated list of fields to return in the response</li>
<li><strong>lang</strong> &#8211; The script language (default: mvel)</li>
<li><strong>parent</strong> &#8211; ID of the parent document</li>
<li><strong>refresh</strong> &#8211; Refresh the index after performing the operation</li>
<li><strong>replication</strong> &#8211; Specific replication type (default: sync)</li>
<li><strong>retry_on_conflict</strong> &#8211; Specify how many times should the operation be
retried when a conflict occurs (default: 0)</li>
<li><strong>routing</strong> &#8211; Specific routing value</li>
<li><strong>script</strong> &#8211; The URL-encoded script definition (instead of using request body)</li>
<li><strong>timeout</strong> &#8211; Explicit operation timeout</li>
<li><strong>timestamp</strong> &#8211; Explicit timestamp for the document</li>
<li><strong>ttl</strong> &#8211; Expiration time for the document</li>
<li><strong>version</strong> &#8211; Explicit version number for concurrency control</li>
<li><strong>version_type</strong> &#8211; Explicit version number for concurrency control</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="bonfire.elastic.ESCollection">
<em class="property">class </em><tt class="descclassname">bonfire.elastic.</tt><tt class="descname">ESCollection</tt><big>(</big><em>resultset</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESCollection" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="bonfire.elastic.ESCollection.next">
<tt class="descname">next</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.elastic.ESCollection.next" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="bonfire.elastic.ESDocument">
<em class="property">class </em><tt class="descclassname">bonfire.elastic.</tt><tt class="descname">ESDocument</tt><big>(</big><em>doc</em><big>)</big><a class="headerlink" href="#bonfire.elastic.ESDocument" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="bonfire.elastic.ESDocument.clear">
<tt class="descname">clear</tt><big>(</big><big>)</big> &rarr; None.  Remove all items from D.<a class="headerlink" href="#bonfire.elastic.ESDocument.clear" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESDocument.copy">
<tt class="descname">copy</tt><big>(</big><big>)</big> &rarr; a shallow copy of D<a class="headerlink" href="#bonfire.elastic.ESDocument.copy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="bonfire.elastic.ESDocument.fromkeys">
<em class="property">static </em><tt class="descname">fromkeys</tt><big>(</big><em>S</em><span class="optional">[</span>, <em>v</em><span class="optional">]</span><big>)</big> &rarr; New dict with keys from S and values equal to v.<a class="headerlink" href="#bonfire.elastic.ESDocument.fromkeys" title="Permalink to this definition">¶</a></dt>
<dd><p>v defaults to None.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESDocument.get">
<tt class="descname">get</tt><big>(</big><em>k</em><span class="optional">[</span>, <em>d</em><span class="optional">]</span><big>)</big> &rarr; D[k] if k in D, else d.  d defaults to None.<a class="headerlink" href="#bonfire.elastic.ESDocument.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESDocument.has_key">
<tt class="descname">has_key</tt><big>(</big><em>k</em><big>)</big> &rarr; True if D has a key k, else False<a class="headerlink" href="#bonfire.elastic.ESDocument.has_key" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESDocument.items">
<tt class="descname">items</tt><big>(</big><big>)</big> &rarr; list of D's (key, value) pairs, as 2-tuples<a class="headerlink" href="#bonfire.elastic.ESDocument.items" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESDocument.iteritems">
<tt class="descname">iteritems</tt><big>(</big><big>)</big> &rarr; an iterator over the (key, value) items of D<a class="headerlink" href="#bonfire.elastic.ESDocument.iteritems" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESDocument.iterkeys">
<tt class="descname">iterkeys</tt><big>(</big><big>)</big> &rarr; an iterator over the keys of D<a class="headerlink" href="#bonfire.elastic.ESDocument.iterkeys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESDocument.itervalues">
<tt class="descname">itervalues</tt><big>(</big><big>)</big> &rarr; an iterator over the values of D<a class="headerlink" href="#bonfire.elastic.ESDocument.itervalues" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESDocument.keys">
<tt class="descname">keys</tt><big>(</big><big>)</big> &rarr; list of D's keys<a class="headerlink" href="#bonfire.elastic.ESDocument.keys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESDocument.pop">
<tt class="descname">pop</tt><big>(</big><em>k</em><span class="optional">[</span>, <em>d</em><span class="optional">]</span><big>)</big> &rarr; v, remove specified key and return the corresponding value.<a class="headerlink" href="#bonfire.elastic.ESDocument.pop" title="Permalink to this definition">¶</a></dt>
<dd><p>If key is not found, d is returned if given, otherwise KeyError is raised</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESDocument.popitem">
<tt class="descname">popitem</tt><big>(</big><big>)</big> &rarr; (k, v), remove and return some (key, value) pair as a<a class="headerlink" href="#bonfire.elastic.ESDocument.popitem" title="Permalink to this definition">¶</a></dt>
<dd><p>2-tuple; but raise KeyError if D is empty.</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESDocument.setdefault">
<tt class="descname">setdefault</tt><big>(</big><em>k</em><span class="optional">[</span>, <em>d</em><span class="optional">]</span><big>)</big> &rarr; D.get(k,d), also set D[k]=d if k not in D<a class="headerlink" href="#bonfire.elastic.ESDocument.setdefault" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESDocument.update">
<tt class="descname">update</tt><big>(</big><span class="optional">[</span><em>E</em>, <span class="optional">]</span><em>**F</em><big>)</big> &rarr; None.  Update D from dict/iterable E and F.<a class="headerlink" href="#bonfire.elastic.ESDocument.update" title="Permalink to this definition">¶</a></dt>
<dd><p>If E present and has a .keys() method, does:     for k in E: D[k] = E[k]
If E present and lacks .keys() method, does:     for (k, v) in E: D[k] = v
In either case, this is followed by: for k in F: D[k] = F[k]</p>
</dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESDocument.values">
<tt class="descname">values</tt><big>(</big><big>)</big> &rarr; list of D's values<a class="headerlink" href="#bonfire.elastic.ESDocument.values" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESDocument.viewitems">
<tt class="descname">viewitems</tt><big>(</big><big>)</big> &rarr; a set-like object providing a view on D's items<a class="headerlink" href="#bonfire.elastic.ESDocument.viewitems" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESDocument.viewkeys">
<tt class="descname">viewkeys</tt><big>(</big><big>)</big> &rarr; a set-like object providing a view on D's keys<a class="headerlink" href="#bonfire.elastic.ESDocument.viewkeys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.elastic.ESDocument.viewvalues">
<tt class="descname">viewvalues</tt><big>(</big><big>)</big> &rarr; an object providing a view on D's values<a class="headerlink" href="#bonfire.elastic.ESDocument.viewvalues" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-bonfire.extract">
<span id="bonfire-extract"></span><h2>bonfire.extract<a class="headerlink" href="#module-bonfire.extract" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="bonfire.extract.ArticleExtractor">
<em class="property">class </em><tt class="descclassname">bonfire.extract.</tt><tt class="descname">ArticleExtractor</tt><big>(</big><em>url=None</em>, <em>html=None</em><big>)</big><a class="headerlink" href="#bonfire.extract.ArticleExtractor" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="bonfire.extract.ArticleExtractor.article_node">
<tt class="descname">article_node</tt><a class="headerlink" href="#bonfire.extract.ArticleExtractor.article_node" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="bonfire.extract.ArticleExtractor.author">
<tt class="descname">author</tt><a class="headerlink" href="#bonfire.extract.ArticleExtractor.author" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="bonfire.extract.ArticleExtractor.doc">
<tt class="descname">doc</tt><a class="headerlink" href="#bonfire.extract.ArticleExtractor.doc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.extract.ArticleExtractor.fetch">
<tt class="descname">fetch</tt><big>(</big><em>url</em><big>)</big><a class="headerlink" href="#bonfire.extract.ArticleExtractor.fetch" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.extract.ArticleExtractor.get_article_text">
<tt class="descname">get_article_text</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.extract.ArticleExtractor.get_article_text" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="bonfire.extract.ArticleExtractor.get_top_image">
<tt class="descname">get_top_image</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.extract.ArticleExtractor.get_top_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the first of the article images.</p>
</dd></dl>

<dl class="attribute">
<dt id="bonfire.extract.ArticleExtractor.html">
<tt class="descname">html</tt><a class="headerlink" href="#bonfire.extract.ArticleExtractor.html" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="bonfire.extract.ArticleExtractor.images">
<tt class="descname">images</tt><a class="headerlink" href="#bonfire.extract.ArticleExtractor.images" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="bonfire.extract.ArticleExtractor.metadata">
<tt class="descname">metadata</tt><a class="headerlink" href="#bonfire.extract.ArticleExtractor.metadata" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="bonfire.extract.ArticleExtractor.title">
<tt class="descname">title</tt><a class="headerlink" href="#bonfire.extract.ArticleExtractor.title" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="bonfire.extract.ArticleExtractor.url">
<tt class="descname">url</tt><a class="headerlink" href="#bonfire.extract.ArticleExtractor.url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="exception">
<dt id="bonfire.extract.InstantiationError">
<em class="property">exception </em><tt class="descclassname">bonfire.extract.</tt><tt class="descname">InstantiationError</tt><a class="headerlink" href="#bonfire.extract.InstantiationError" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="bonfire.extract.InstantiationError.args">
<tt class="descname">args</tt><a class="headerlink" href="#bonfire.extract.InstantiationError.args" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="bonfire.extract.InstantiationError.message">
<tt class="descname">message</tt><a class="headerlink" href="#bonfire.extract.InstantiationError.message" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="bonfire.extract.as_date">
<tt class="descclassname">bonfire.extract.</tt><tt class="descname">as_date</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#bonfire.extract.as_date" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.extract.clean_attribution">
<tt class="descclassname">bonfire.extract.</tt><tt class="descname">clean_attribution</tt><big>(</big><em>string</em><big>)</big><a class="headerlink" href="#bonfire.extract.clean_attribution" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.extract.clean_whitespace">
<tt class="descclassname">bonfire.extract.</tt><tt class="descname">clean_whitespace</tt><big>(</big><em>string</em><big>)</big><a class="headerlink" href="#bonfire.extract.clean_whitespace" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.extract.content_nodes">
<tt class="descclassname">bonfire.extract.</tt><tt class="descname">content_nodes</tt><big>(</big><em>elem</em>, <em>node_types=None</em><big>)</big><a class="headerlink" href="#bonfire.extract.content_nodes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.extract.find_pubdate">
<tt class="descclassname">bonfire.extract.</tt><tt class="descname">find_pubdate</tt><big>(</big><em>node</em><big>)</big><a class="headerlink" href="#bonfire.extract.find_pubdate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.extract.is_attribution">
<tt class="descclassname">bonfire.extract.</tt><tt class="descname">is_attribution</tt><big>(</big><em>string</em><big>)</big><a class="headerlink" href="#bonfire.extract.is_attribution" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.extract.link_density">
<tt class="descclassname">bonfire.extract.</tt><tt class="descname">link_density</tt><big>(</big><em>obj</em><big>)</big><a class="headerlink" href="#bonfire.extract.link_density" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.extract.word_count">
<tt class="descclassname">bonfire.extract.</tt><tt class="descname">word_count</tt><big>(</big><em>text</em><big>)</big><a class="headerlink" href="#bonfire.extract.word_count" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-bonfire.mappings">
<span id="bonfire-mappings"></span><h2>bonfire.mappings<a class="headerlink" href="#module-bonfire.mappings" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-bonfire.process">
<span id="bonfire-process"></span><h2>bonfire.process<a class="headerlink" href="#module-bonfire.process" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="bonfire.process.create_session">
<tt class="descclassname">bonfire.process.</tt><tt class="descname">create_session</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.process.create_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a requests session optimized for many connections.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.process.logger">
<tt class="descclassname">bonfire.process.</tt><tt class="descname">logger</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.process.logger" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.process.process_rawtweet">
<tt class="descclassname">bonfire.process.</tt><tt class="descname">process_rawtweet</tt><big>(</big><em>universe</em>, <em>raw_tweet</em>, <em>session=None</em><big>)</big><a class="headerlink" href="#bonfire.process.process_rawtweet" title="Permalink to this definition">¶</a></dt>
<dd><p>Take a raw tweet from the queue, extract and save metadata from its content,
then save as a processed tweet.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.process.process_universe_rawtweets">
<tt class="descclassname">bonfire.process.</tt><tt class="descname">process_universe_rawtweets</tt><big>(</big><em>universe</em>, <em>build_mappings=True</em><big>)</big><a class="headerlink" href="#bonfire.process.process_universe_rawtweets" title="Permalink to this definition">¶</a></dt>
<dd><p>Take all unprocessed tweets in given universe, extract and process their
contents.  When there are no tweets, sleep until it sees a new one.</p>
</dd></dl>

</div>
<div class="section" id="module-bonfire.twitter">
<span id="bonfire-twitter"></span><h2>bonfire.twitter<a class="headerlink" href="#module-bonfire.twitter" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="bonfire.twitter.client">
<tt class="descclassname">bonfire.twitter.</tt><tt class="descname">client</tt><big>(</big><em>universe</em><big>)</big><a class="headerlink" href="#bonfire.twitter.client" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a Twitter client for the given universe.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.twitter.collect_universe_tweets">
<tt class="descclassname">bonfire.twitter.</tt><tt class="descname">collect_universe_tweets</tt><big>(</big><em>universe</em><big>)</big><a class="headerlink" href="#bonfire.twitter.collect_universe_tweets" title="Permalink to this definition">¶</a></dt>
<dd><p>Connects to the streaming API and enqueues tweets from universe users.
Limited to the top 5000 users by API limitation.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.twitter.get_friends">
<tt class="descclassname">bonfire.twitter.</tt><tt class="descname">get_friends</tt><big>(</big><em>universe</em>, <em>user_id</em><big>)</big><a class="headerlink" href="#bonfire.twitter.get_friends" title="Permalink to this definition">¶</a></dt>
<dd><p>Get Twitter IDs for friends of the given user_id.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.twitter.logger">
<tt class="descclassname">bonfire.twitter.</tt><tt class="descname">logger</tt><big>(</big><big>)</big><a class="headerlink" href="#bonfire.twitter.logger" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.twitter.lookup_users">
<tt class="descclassname">bonfire.twitter.</tt><tt class="descname">lookup_users</tt><big>(</big><em>universe</em>, <em>usernames</em><big>)</big><a class="headerlink" href="#bonfire.twitter.lookup_users" title="Permalink to this definition">¶</a></dt>
<dd><p>Lookup Twitter users by screen name. Limited to first 100 user
names by API limitation.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.twitter.stream_client">
<tt class="descclassname">bonfire.twitter.</tt><tt class="descname">stream_client</tt><big>(</big><em>universe</em><big>)</big><a class="headerlink" href="#bonfire.twitter.stream_client" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a Twitter streaming client for the given universe.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.twitter.tweet_link">
<tt class="descclassname">bonfire.twitter.</tt><tt class="descname">tweet_link</tt><big>(</big><em>universe</em>, <em>link</em><big>)</big><a class="headerlink" href="#bonfire.twitter.tweet_link" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-bonfire.universe">
<span id="bonfire-universe"></span><h2>bonfire.universe<a class="headerlink" href="#module-bonfire.universe" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="bonfire.universe.build_universe">
<tt class="descclassname">bonfire.universe.</tt><tt class="descname">build_universe</tt><big>(</big><em>universe</em>, <em>build_mappings=True</em><big>)</big><a class="headerlink" href="#bonfire.universe.build_universe" title="Permalink to this definition">¶</a></dt>
<dd><p>Expand the universe from the seed user list in the universe file.
Should only be called once every 15 minutes.</p>
<p>This command also functions as an update of a universe.</p>
<p>Seed is currently limited to the first 14 users in the file. API threshold
limit is 15 calls per 15 minutes, and we need an extra call for
the initial request for seed user IDs. If we want a seed &gt; 14, we will
need to be sure not to exceed 15 hits/15 min.</p>
</dd></dl>

<dl class="function">
<dt id="bonfire.universe.cache_queries">
<tt class="descclassname">bonfire.universe.</tt><tt class="descname">cache_queries</tt><big>(</big><em>universe</em>, <em>top_links=False</em>, <em>tweet=False</em><big>)</big><a class="headerlink" href="#bonfire.universe.cache_queries" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.universe.cleanup_universe">
<tt class="descclassname">bonfire.universe.</tt><tt class="descname">cleanup_universe</tt><big>(</big><em>universe</em>, <em>days=30</em><big>)</big><a class="headerlink" href="#bonfire.universe.cleanup_universe" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="bonfire.universe.update_top_links">
<tt class="descclassname">bonfire.universe.</tt><tt class="descname">update_top_links</tt><big>(</big><em>universe</em>, <em>tweet=False</em><big>)</big><a class="headerlink" href="#bonfire.universe.update_top_links" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Welcome to Bonfire&#8217;s documentation!</a></li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
<li><a class="reference internal" href="#api-documentation">API Documentation</a><ul>
<li><a class="reference internal" href="#module-bonfire.cli">bonfire.cli</a></li>
<li><a class="reference internal" href="#module-bonfire.config">bonfire.config</a></li>
<li><a class="reference internal" href="#module-bonfire.content">bonfire.content</a></li>
<li><a class="reference internal" href="#module-bonfire.dates">bonfire.dates</a></li>
<li><a class="reference internal" href="#module-bonfire.db">bonfire.db</a></li>
<li><a class="reference internal" href="#module-bonfire.elastic">bonfire.elastic</a></li>
<li><a class="reference internal" href="#module-bonfire.extract">bonfire.extract</a></li>
<li><a class="reference internal" href="#module-bonfire.mappings">bonfire.mappings</a></li>
<li><a class="reference internal" href="#module-bonfire.process">bonfire.process</a></li>
<li><a class="reference internal" href="#module-bonfire.twitter">bonfire.twitter</a></li>
<li><a class="reference internal" href="#module-bonfire.universe">bonfire.universe</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="sources/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="#">Bonfire 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Northwestern University Knight Lab &amp; Nieman Journalism Lab.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>
